#config.yaml

steps:
  - name: datasetA
    type: load
    path: "datasentinel/data/datasetA.csv"
    format: "csv"
    write: True
    write_format: "csv"

  - name: datasetB
    type: load
    path: "datasentinel/data/datasetB.csv"
    format: "csv"

  - name: transformA
    type: transform
    query: "SELECT *, price * 2 as price_doubled FROM datasetA"
    write: True
    write_format: "csv"


  - name: test_datasets
    type: test
    LHS: datasetA
    RHS: datasetB
    write: False
    write_format: "csv"
    test: "full_recon"
    additional_attributes:
      join_columns: ["product"]
      compare_columns:
        price: {}
  
  - name: test_datasets_localfast
    type: test
    LHS: datasetA
    RHS: datasetB
    write: False
    write_format: "csv"
    test: "localfast_recon"
    additional_attributes:
      join_columns: ["product"]
      compare_columns:
        price:
          tolerance: 0.01

  - name: test_datasets_arrow
    type: test
    LHS: datasetA
    RHS: datasetB
    write: True
    write_format: "csv"
    test: "arrow_recon"
    additional_attributes:
      join_columns: ["product"]
      compare_columns:
        price:
          tolerance: 0.01
          semantics: row_infer
